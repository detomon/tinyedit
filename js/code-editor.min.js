!function(a,b){"use strict";function c(a){return m+a}function d(){var b=a.documentElement;return{x:a.body.scrollLeft+b.scrollLeft,y:a.body.scrollTop+b.scrollTop}}function e(a,b){var c=d();return a-=c.x,b-=c.y,{x:a,y:b}}function f(b,c,d){var f,g,h,i=e(c,d);if(c=i.x,d=i.y,a.caretPositionFromPoint)f=a.caretPositionFromPoint(c,d),g=f.offsetNode,h=f.offset;else{if(!a.caretRangeFromPoint)return calcTextOffsetFromPosition(b,c,d);f=a.caretRangeFromPoint(c,d),g=f.startContainer,h=f.startOffset}return{textNode:g,offset:h}}function g(a){for(;a.parentNode;){if(a.parentNode.classList.contains(c("container")))return a;a=a.parentNode}return null}function h(b){var c=a.createElement("div"),d=a.createElement("div");return d.innerHTML=b,c.appendChild(d),c}function i(a,b){var c,d,e,f=Array.prototype.slice.call(arguments,1);for(c=0;c<f.length;c++){var e=f[c];for(d in e)e.hasOwnProperty(d)&&null!==e[d]&&void 0!==e[d]&&(a[d]=e[d])}return a}function j(a,b){for(var c="",d=0;b>d;d++)c+=a;return c}function k(d,e){var f=this;e=i({tabWidth:4,textarea:null,lineBreak:"\n"},e),e.tabContent=j(" ",e.tabWidth),this.options=e,this.deferred={funcs:[],timeout:null,run:function(a){var c=this;this.funcs.push(a),this.timeout||(this.timeout=b.setTimeout(function(){for(var a=0;a<c.funcs.length;a++)c.funcs[a]();c.funcs=[],c.timeout=null},0))}},this.cursors={list:[],remove:function(a){var b=this.list.indexOf(a);b>=0&&this.list.splice(b,1)},removeAll:function(){this.list.forEach(function(a){a.parentNode.removeChild(a)}),this.list=[]},create:function(){var b=a.createElement("span");return b.classList.add(c("cursor"),c("blink")),this.list.push(b),b},createInputElement:function(){if(!this.inputElement){var b=a.createElement("textarea");b.setAttribute("wrap","off"),b.setAttribute("autocapitalize","off"),b.setAttribute("spellcheck","false"),b.classList.add(c("input")),b.addEventListener("blur",function(){f.deferred.run(function(){f.cursors.removeAll()})}),this.inputElement=b}return this.inputElement},activateForInput:function(a){var b=this.createInputElement();a.appendChild(b),b.focus()},resetBlink:function(){var a=this;this.list.forEach(function(a){a.classList.remove(c("blink"))}),deferred.run(function(){a.list.forEach(function(a){a.classList.add(c("blink"))})})}},this.lines={element:null},this.gutter={element:null,update:function(){for(var b=this.element,c=b.childNodes.length,d=f.lines.element.childNodes.length;d>c;){var e=a.createElement("div");e.textContent=c+1,b.appendChild(e),c++}for(;c>d;)b.removeChild(b.lastChild),c--}},this.value=function(a){var b=this;a=i({lineBreak:b.options.lineBreak},a);for(var c=[],d=this.lines.element.children,e=0;e<d.length;e++)c.push(d[e].textContent);return c.join(a.lineBreak)};var g,h=a.createElement("div"),k=a.createElement("div"),l=a.createElement("div"),m=a.createElement("div");h.appendChild(l),k.appendChild(m),h.classList.add(c("content")),l.classList.add(c("content-inner"),c("container")),k.classList.add(c("gutter")),m.classList.add(c("gutter-inner"),c("container")),e.textarea?(g=e.textarea.value,textarea.style.display="none"):g=d.textContent,g=g.split(/\r?\n/m),g.forEach(function(a){var b=f.createLineElementFromRawLineContent(a);l.appendChild(b)}),this.lines.element=l,this.gutter.element=m,this.gutter.update(),d.innerHTML="",d.appendChild(k),d.appendChild(h),d.addEventListener("mousedown",function(a){f.handleMouseDownEvent(a)})}var l="code-editor",m=l+"-",n=l+(1e7*Math.random()|0),o=k.prototype;o.createLineElementFromRawLineContent=function(a){return a=a.replace(/\s+$/g,""),a=a.replace(/\t/g,'<span class="'+c("tab")+'">'+this.options.tabContent+"</span>"),h(a)},o.handleGutterClick=function(a,b){},o.handleTextClick=function(b,d){var e=this,g=d.pageX,h=d.pageY,i=f(b,g,h);if(i){var j=i.textNode;if(j.parentNode.classList.contains(c("tab")))return void console.log("tab",i);j.classList&&j.classList.contains(c("cursor"))&&(j=j.previousSibling?j.previousSibling:j.parentNode.insertBefore(a.createTextNode(""),j),i.textNode=j),this.cursors.removeAll(),this.deferred.run(function(){var a=e.cursors.create();b.insertBefore(a,j.nextSibling),e.cursors.activateForInput(a)})}},o.handleMouseDownEvent=function(a){var b=this,d=a.target;if(a.preventDefault(),d=g(d),!d)return null;var e=d.parentNode;e.classList.contains(c("content-inner"))?(d=d.querySelector("div"),b.handleTextClick(d,a)):e.classList.contains(c("gutter-inner"))&&b.handleGutterClick(d,a)},window.CodeEditor=function(a,b){if(!a||!a.parentNode||!a.ownerDocument)return null;if(!a[n]){var c=new k(a,b);a[n]=c}return a[n]}}(document,window);
//# sourceMappingURL=code-editor.min.js.map